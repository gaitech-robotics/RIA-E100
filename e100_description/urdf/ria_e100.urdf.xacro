<?xml version="1.0"?>
<robot name="RIA-E100" xmlns:xacro="http://www.ros.org/wiki/xacro">

  <xacro:include filename="$(find e100_description)/urdf/include/materials.urdf.xacro"/>
  <xacro:include filename="$(find e100_description)/urdf/include/property.urdf.xacro"/>
  <xacro:include filename="$(find e100_description)/urdf/include/wheels.urdf.xacro"/>
  <xacro:include filename="$(find gaitech_sensors)/urdf/all_sensors.urdf.xacro"/>


  <link name="base_link">
    <visual>
      <geometry>
        <box size="0.001 0.001 0.001"/>
      </geometry>
      <material name="Green"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </visual>   
  </link>

  <link name="RIA_BASE" >
    <inertial>
      <mass value="7.84422145"/>
      <origin rpy=" 0 0 0" xyz="0.00729794 0.00167026 0.05375158"/>
      <inertia  ixx="0.13537085" ixy="-3.0694E-04" ixz="0.00230818" iyy="0.22927569" iyz="3.874E-05" izz="0.30459422"/>
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://e100_description/meshes/base.stl" />
      </geometry>
      <material name="Dark_Grey"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://e100_description/meshes/base.stl"/>
      </geometry>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>      
  </link>

  <link name="RIA_TOP_FRAME">
    <inertial>
      <mass value="6.03381"/>
      <origin rpy=" 0 0 0" xyz="0.006450 -2.594E-5 -0.0538955"/>
      <inertia  ixx="0.08424958" ixy="3.313E-05" ixz="0.00167397" iyy="0.13408855" iyz="-7.97E-06" izz="0.18770025" />
    </inertial>
    <visual>
      <geometry>
        <mesh filename="package://e100_description/meshes/top_plate.stl" />
      </geometry>
      <material name="Dark_Grey"/>
      <origin rpy="0 0 0" xyz="0 0 0"/>
    </visual>
    <collision>
      <geometry>
        <mesh filename="package://e100_description/meshes/top_plate.stl" />
       </geometry>
       <origin rpy="0 0 0" xyz="0 0 0"/>
    </collision>
  </link>

  <joint name="base_link_to_RIA_BASE" type="fixed">
    <parent link="base_link"/>
    <child link="RIA_BASE"/>
    <origin rpy="0 0 0" xyz="-0.136 0 0"/>
  </joint>

  <joint name="RIA_BASE_to_RIA_TOP_FRAME" type="fixed">
    <parent link="RIA_BASE"/>
    <child link="RIA_TOP_FRAME"/>
    <origin rpy="0 0 0" xyz="0 0 0.265"/>
  </joint>

  <joint name="front_right_wheel_joint" type="continuous">
    <parent link="RIA_BASE"/>
    <child link="front_right_wheel"/>
    <origin rpy="${M_PI} 0 0" xyz=" 0.136 -0.227 0.027 "/>
    <axis xyz="0 1 0" rpy="0 0 0" />
    <limit effort="200" velocity="200"/>
    <joint_properties damping="0" friction="0"/>
  </joint>

  <joint name="front_left_wheel_joint" type="continuous">
    <parent link="RIA_BASE"/>
    <child link="front_left_wheel"/>
    <origin rpy="0 0 0" xyz="0.136 0.227 0.027"/>
    <axis xyz="0 1 0" rpy="0 0 0" />
    <limit effort="200" velocity="200"/>
    <joint_properties damping="0" friction="0"/>
  </joint>

  <joint name="rear_left_wheel_joint" type="fixed">
    <parent link="RIA_BASE"/>
    <child link="rear_left_wheel"/>
    <origin rpy="0 0 0" xyz="-0.18923 0.115 0.0005"/>
  </joint>

  <joint name="rear_right_wheel_joint" type="fixed">
    <parent link="RIA_BASE"/>
    <child link="rear_right_wheel"/>
    <origin rpy="0 0 0" xyz="-0.18923 -0.115 0.0005"/>
  </joint>

  <!--Sensors-->
  <xacro:sensor_imu prefix="imu" parent="base_link" topic="e100_imu">
     <origin xyz="0 -0.12 0.1" rpy="0 0 0"/>
  </xacro:sensor_imu>

  <xacro:sensor_orbbec_astra prefix="front_rgbd_camera" parent="RIA_TOP_FRAME" prefix_topic="front_rgbd_camera">
     <origin xyz="0.2004 0.0 -0.071" rpy="0 0 0"/>
  </xacro:sensor_orbbec_astra>

  <xacro:sensor_rplidar_a2 prefix="front_laser" parent="RIA_TOP_FRAME" prefix_topic="front_laser">
     <origin xyz="0.167 0.0 0.0" rpy="0 0 0"/>
  </xacro:sensor_rplidar_a2> 

 
</robot>
